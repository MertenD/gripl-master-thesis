\section{Validierung der Ausgabe}\label{sec:validierung-der-ausgabe}

Zusätzlich zu den in Kapitel \ref{sec:prompt-engineering} beschriebenen Maßnahmen zur Sicherstellung strukturierter Ausgaben wird die Antwort des \ac{LLM} durch LangChain4j validiert. Wenn das erwartete Schema vom \ac{LLM} nicht eingehalten wird, wirft Langchain4j eine \texttt{OutputParsingException}.

\textcolor{orange}{// TODO Eventuell noch Retry Mechanismus wenn am Ende noch Zeit ist mit Nachrichtenverlauf und Parsing Fehlermeldung. Das muss aber auch erst einmal implementiert werden. Aktuell gibt es nur den Parsing Error.}

Ein weiterer Mechanismus zur Validierung der Ausgabe ist die Überprüfung der ausgegebenen \texttt{ids}. Da das \ac{LLM} theoretisch jede beliebige \texttt{id} ausgeben könnte, werden die ausgegebenen \texttt{ids} mit den tatsächlichen \texttt{ids} der Aktivitäten aus dem Prozess abgeglichen. Falls eine ausgegebene Aktivität nicht im Prozess existiert, wird diese aus der Antwort der Klassifizierung entfernt. Dadurch wird sichergestellt, dass nur gültige \texttt{ids} in der finalen Ausgabe enthalten sind.

Nachdem es nun möglich ist, \ac{BPMN}-Prozesse vorzuverarbeiten, zu klassifizieren und die Ausgabe zu validieren, folgt als nächster Schritt die Definition einer Schnittstelle zum Aufruf der Pipeline. Das nächste Kapitel beschreibt dafür das API-Design.